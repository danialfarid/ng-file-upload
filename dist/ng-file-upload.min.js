/*! 7.0.0 */
!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(a){return function(b,c){if("__setXHR_"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="7.0.0",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(a,b,c){function d(d){d.method=d.method||"POST",d.headers=d.headers||{};var e=b.defer(),f=e.promise;return d.headers.__setXHR_=function(){return function(a){a&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){a.config=d,e.notify?e.notify(a):f.progressFunc&&c(function(){f.progressFunc(a)})},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&(a.config=d,e.notify?e.notify(a):f.progressFunc&&c(function(){f.progressFunc(a)}))},!1))}},a(d).then(function(a){e.resolve(a)},function(a){e.reject(a)},function(a){e.notify(a)}),f.success=function(a){return f.then(function(b){a(b.data,b.status,b.headers,d)}),f},f.error=function(a){return f.then(null,function(b){a(b.data,b.status,b.headers,d)}),f},f.progress=function(a){return f.progressFunc=a,f.then(null,null,function(b){a(b)}),f},f.abort=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),f},f.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(f,arguments),a.apply(f,arguments)}}(d.xhrFn),f},f}this.upload=function(a){function b(c,d,e){if(void 0!==d)if(angular.isDate(d)&&(d=d.toISOString()),angular.isString(d))c.append(e,d);else if("form"===a.sendFieldsAs)if(angular.isObject(d))for(var f in d)d.hasOwnProperty(f)&&b(c,d[f],e+"["+f+"]");else c.append(e,d);else d=angular.isString(d)?d:JSON.stringify(d),"json-blob"===a.sendFieldsAs?c.append(e,new Blob([d],{type:"application/json"})):c.append(e,d)}return a.headers=a.headers||{},a.headers["Content-Type"]=void 0,a.transformRequest=a.transformRequest?angular.isArray(a.transformRequest)?a.transformRequest:[a.transformRequest]:[],a.transformRequest.push(function(c){var d,e=new FormData,f={};for(d in a.fields)a.fields.hasOwnProperty(d)&&(f[d]=a.fields[d]);c&&(f.data=c);for(d in f)if(f.hasOwnProperty(d)){var g=f[d];a.formDataAppender?a.formDataAppender(e,d,g):b(e,g,d)}if(null!=a.file){var h=a.fileFormDataName||"file";if(angular.isArray(a.file))for(var i=angular.isString(h),j=0;j<a.file.length;j++)e.append(i?h:h[j],a.file[j],a.fileName&&a.fileName[j]||a.file[j].name);else e.append(h,a.file,a.fileName||a.file.name)}return e}),d(a)},this.http=function(b){return b.transformRequest=b.transformRequest||function(b){return window.ArrayBuffer&&b instanceof window.ArrayBuffer||b instanceof Blob?b:a.defaults.transformRequest[0](arguments)},d(b)},this.setDefaults=function(a){this.defaults=a||{}},this.defaults={},this.version=ngFileUpload.version}]),function(){ngFileUpload.service("Upload",["$parse","$timeout","$compile","UploadValidate",function(a,b,c,d){var e=d;return e.getAttrWithDefaults=function(a,b){return null!=a[b]?a[b]:null==e.defaults[b]?e.defaults[b]:e.defaults[b].toString()},e.attrGetter=function(b,c,d,e){return d?e?a(this.getAttrWithDefaults(c,b))(d,e):a(this.getAttrWithDefaults(c,b))(d):this.getAttrWithDefaults(c,b)},e.updateModel=function(c,d,f,g,h,i,j){function k(){var j=e.attrGetter("ngfKeep",d,f);if(j===!0){var k=(c.$modelValue||[]).slice(0);if(h&&h.length)if(e.attrGetter("ngfKeepDistinct",d.scope)===!0){for(var l=k.length,m=0;m<h.length;m++){for(var n=0;l>n&&h[m].name!==k[n].name;n++);n===l&&k.push(h[m])}h=k}else h=k.concat(h);else h=k}var o=h&&h.length?h[0]:null;if(c){var p=!e.attrGetter("ngfMultiple",d,f)&&!e.attrGetter("multiple",d)&&!j;b(function(){a(e.attrGetter("ngModel",d)).assign(f,p?o:h)})}var q=e.attrGetter("ngfModel",d);q&&a(q).assign(f,h),g&&a(g)(f,{$files:h,$file:o,$event:i})}e.validate(h,c,d,f,e.attrGetter("ngfValidateLater",d),function(){j?k():b(function(){k()})})},e}])}(),function(){function a(a,b,c,d,e,f,g,h){function i(){return"input"===b[0].tagName.toLowerCase()&&c.type&&"file"===c.type.toLowerCase()}function j(){return s("ngfChange")||s("ngfSelect")}function k(b){for(var e=b.__files_||b.target&&b.target.files,f=[],g=0;g<e.length;g++)f.push(e[g]);h.updateModel(d,c,a,j(),f.length?f:null,b)}function l(c){if(s("ngfMultiple")&&c.attr("multiple",e(s("ngfMultiple"))(a)),s("ngfCapture")&&c.attr("capture",e(s("ngfCapture"))(a)),s("accept")&&c.attr("accept",s("accept")),b!==c)for(var d=0;d<b[0].attributes.length;d++){var f=b[0].attributes[d];"type"!==f.name&&"class"!==f.name&&"id"!==f.name&&"style"!==f.name&&((null==f.value||""===f.value)&&("required"===f.name&&(f.value="required"),"multiple"===f.name&&(f.value="multiple")),c.attr(f.name,f.value))}}function m(){if(i())return b;var a=angular.element('<input type="file">');return l(a),a.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),b.$$ngfRefElem&&b.$$ngfRefElem.remove(),b.$$ngfRefElem=a,document.body.appendChild(a[0]),a}function n(a){if(b.attr("disabled")||t)return!1;var c=o(a);return null!=c?c:(p(navigator.userAgent)?setTimeout(function(){v[0].click()},0):v[0].click(),!1)}function o(a){var b=a.changedTouches||a.originalEvent&&a.originalEvent.changedTouches;if("touchstart"===a.type)return u=b?b[0].clientY:0,!0;if(a.stopPropagation(),a.preventDefault(),"touchend"===a.type){var c=b?b[0].clientY:0;if(Math.abs(c-u)>20)return!1}}function p(a){var b=a.match(/Android[^\d]*(\d+)\.(\d+)/);if(b&&b.length>2){var c=h.defaults.androidFixMinorVersion||4;return parseInt(b[1])<4||parseInt(b[1])===c&&parseInt(b[2])<c}return-1===a.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(a)}function q(b){v.val()&&(v.val(null),h.updateModel(d,c,a,j(),null,b,!0))}function r(a){if(v&&!v.attr("__ngf_ie10_Fix_")){if(!v[0].parentNode)return void(v=null);a.preventDefault(),a.stopPropagation(),v.unbind("click");var b=v.clone();return v.replaceWith(b),v=b,v.attr("__ngf_ie10_Fix_","true"),v.bind("change",k),v.bind("click",r),v[0].click(),!1}v.removeAttr("__ngf_ie10_Fix_")}var s=function(a,b){return h.attrGetter(a,c,b)};h.registerValidators(d,c,a);var t=!1;c.$observe("ngfSelect",function(a){a===!1?b.attr("disabled","disabled"):a===!0&&b.removeAttr("disabled")});var u=0,v=b;i()||(v=m()),v.bind("change",k),i()||b.bind("click touchstart touchend",n),-1===navigator.userAgent.indexOf("Chrome")&&b.bind("click",function(a){q(a)}),-1!==navigator.appVersion.indexOf("MSIE 10")&&v.bind("click",r),a.$on("$destroy",function(){i()||v.remove()}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(b,v,k)}ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(b,c,d,e){return{restrict:"AEC",require:"?ngModel",link:function(f,g,h,i){a(f,g,h,i,b,c,d,e)}}}])}(),function(){ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(a,b,c){var d={},e=a;return e.dataUrl=function(a,e){if(a.dataUrl){var f=c.defer();return b(function(){f.resolve(a.dataUrl)}),f.promise}if(d[a])return d[a];var g=c.defer();return b(function(){if(window.FileReader&&a&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||a.size<4e6)){var c=window.URL||window.webkitURL;if(c&&c.createObjectURL&&!e){var d;try{d=c.createObjectURL(a)}catch(f){return void g.reject()}a.dataUrl=d,d&&g.resolve(d)}else{var h=new FileReader;h.onload=function(c){b(function(){a.dataUrl=c.target.result,g.resolve(c.target.result)})},h.onerror=function(){b(function(){a.dataUrl="",g.reject()})},h.readAsDataURL(a)}}else a.dataUrl="",g.reject()}),d[a]=g.promise,d[a]["finally"](function(){delete d[a]}),d[a]},e}]),ngFileUpload.directive("ngfSrc",["$parse","$compile","$timeout",function(a,b,c){return{restrict:"AE",link:function(d,e,f){c(function(){e.attr("src","{{("+f.ngfSrc+") | ngfDataUrl"+(a(f.ngfNoObjectUrl)(d)===!0?":true":"")+"}}"),f.$set("ngfSrc",null),b(e)(d)})}}}]),ngFileUpload.directive("ngfBackground",["$parse","$compile","$timeout",function(a,b,c){return{restrict:"AE",link:function(d,e,f){c(function(){e.attr("style",e.attr("style")+";background-image:url('{{("+f.ngfBackground+") | ngfDataUrl"+(a(f.ngfNoObjectUrl)(d)===!0?":true":"")+"}}')"),f.$set("ngfBackground",null),b(e)(d)})}}}]),ngFileUpload.config(["$compileProvider",function(a){a.imgSrcSanitizationWhitelist&&a.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|local|file|data|blob):/),a.aHrefSanitizationWhitelist&&a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(a,b){return function(c,d){return angular.isString(c)?b.trustAsResourceUrl(c):c&&!c.dataUrl?(void 0===c.dataUrl&&angular.isObject(c)&&(c.dataUrl=null,a.dataUrl(c,d).then(function(a){c.dataUrl=a},function(){c.dataUrl=""})),""):(c&&c.dataUrl?b.trustAsResourceUrl(c.dataUrl):c)||""}}])}(),function(){function a(b){if(b.length>2&&"/"===b[0]&&"/"===b[b.length-1])return b.substring(1,b.length-1);var c=b.split(","),d="";if(c.length>1)for(var e=0;e<c.length;e++)d+="("+a(c[e])+")",e<c.length-1&&(d+="|");else 0===b.indexOf(".")&&(b="*"+b),d="^"+b.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",d=d.replace(/\\\*/g,".*").replace(/\\\?/g,".");return d}function b(a){if(angular.isString(a)){if(a.search(/kb/i)===a.length-2)return parseFloat(1e3*a.substring(0,a.length-2));if(a.search(/mb/i)===a.length-2)return parseFloat(1e6*a.substring(0,a.length-2));if(a.search(/gb/i)===a.length-2)return parseFloat(1e9*a.substring(0,a.length-2));if(a.search(/b/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/s/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/m/i)===a.length-1)return parseFloat(60*a.substring(0,a.length-1));if(a.search(/h/i)===a.length-1)return parseFloat(3600*a.substring(0,a.length-1))}return a}ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(c,d,e){var f=c;f.registerValidators=function(a,b,c,d){function e(a){for(var b in a.$ngfValidations)a.$ngfValidations.hasOwnProperty(b)&&a.$setValidity(b,a.$ngfValidations[b])}a.$ngfValidations=a.$ngfValidations||{},a.$formatters.push(function(g){if(d)f.validate(g,a,b,c,!1,function(){e(a)});else{for(var h in a.$ngfValidations)a.$ngfValidations.hasOwnProperty(h)&&a.$setValidity(h,a.$ngfValidations[h]);e(a)}return g})},f.validate=function(c,d,e,g,h,i){function j(a,b,e){if(c){var f=null,g="ngf"+a[0].toUpperCase()+a.substr(1);angular.forEach(void 0===c.length?[c]:c,function(c){var d=l(g,{$file:c});return null==d&&(d=b(l("ngfValidate")||{})),null==d||(f=!0,e(c,d))?void 0:(c.$error=a,c.$errorParam=d,f=!1,!1)}),null!=f&&(d.$ngfValidations[a]=f)}}function k(a,b,e,f,g){if(c){var h=0,j=!1,k="ngf"+a[0].toUpperCase()+a.substr(1);c=void 0===c.length?[c]:c,angular.forEach(c,function(c){if(0!==c.type.search(e))return!0;var n=l(k,{$file:c})||b(l("ngfValidate")||{});n&&(m++,h++,f(c,n).then(function(b){g(b,n)||(c.$error=a,c.$errorParam=n,j=!0)},function(){c.$error=a,c.$errorParam=n,j=!0})["finally"](function(){m--,h--,h||(d.$ngfValidations[a]=!j),m||i.call(d,d.$ngfValidations)}))})}}var l=function(a,b){return f.attrGetter(a,e,g,b)};if(h)return void i.call(d);f.validatePattern=function(b,c){var d=new RegExp(a(c),"gi");return null!=b.type&&d.test(b.type.toLowerCase())||null!=b.name&&d.test(b.name.toLowerCase())},j("pattern",function(a){return a.pattern},f.validatePattern),j("minSize",function(a){return a.size&&a.size.min},function(a,c){return a.size>=b(c)}),j("maxSize",function(a){return a.size&&a.size.max},function(a,c){return a.size<=b(c)}),j("validateFn",function(){return null},function(a,b){return b===!0||null===b||""===b});var m=0;k("maxHeight",function(a){return a.height&&a.height.max},/image/,this.imageDimensions,function(a,b){return a.height<=b}),k("minHeight",function(a){return a.height&&a.height.min},/image/,this.imageDimensions,function(a,b){return a.height>=b}),k("maxWidth",function(a){return a.height&&a.width.max},/image/,this.imageDimensions,function(a,b){return a.width<=b}),k("minWidth",function(a){return a.height&&a.width.min},/image/,this.imageDimensions,function(a,b){return a.width>=b}),k("maxDuration",function(a){return a.height&&a.duration.max},/audio|video/,this.mediaDuration,function(a,c){return a<=b(c)}),k("minDuration",function(a){return a.height&&a.duration.min},/audio|video/,this.mediaDuration,function(a,c){return a>=b(c)}),k("validateAsyncFn",function(){return null},/./,function(a,b){return b},function(a){return a===!0||null===a||""===a}),m||i.call(d,d.$ngfValidations)};var g={},h={};return f.imageDimensions=function(a){if(a.width&&a.height){var b=d.defer();return e(function(){b.resolve({width:a.width,height:a.height})}),b.promise}if(g[a])return g[a];var c=d.defer();return e(function(){return 0!==a.type.indexOf("image")?void c.reject("not image"):void f.dataUrl(a).then(function(b){var d=angular.element("<img>").attr("src",b).css("visibility","none").css("position","fixed");d.on("load",function(){var b=d[0].clientWidth,e=d[0].clientHeight;d.remove(),a.width=b,a.height=e,c.resolve({width:b,height:e})}),d.on("error",function(){d.remove(),c.reject("load error")}),angular.element(document.body).append(d)},function(){c.reject("load error")})}),g[a]=c.promise,g[a]["finally"](function(){delete g[a]}),g[a]},f.mediaDuration=function(a){if(a.duration){var b=d.defer();return e(function(){b.resolve(a.duration)}),b.promise}if(h[a])return h[a];var c=d.defer();return e(function(){return 0===a.type.indexOf("audio")||0===a.type.indexOf("video")?void c.reject("not image"):void f.dataUrl(a).then(function(b){var d=angular.element(0===a.type.indexOf("audio")?"<audio>":"<video>").attr("src",b).css("visibility","none").css("position","fixed");d.on("loadedmetadata",function(){var b=d[0].duration;a.duration=b,d.remove(),c.resolve(b)}),d.on("error",function(){d.remove(),c.reject("load error")}),angular.element(document.body).append(d)},function(){c.reject("load error")})}),h[a]=c.promise,h[a]["finally"](function(){delete h[a]}),h[a]},f}])}(),function(){function a(a,c,d,e,f,g,h,i){function j(a,b,c,d){var e=m("ngfDragOverClass",a,{$event:c});if(e&&(e.delay&&(r=e.delay),e.accept||e.reject)){var f=c.dataTransfer.items,g=[];if(null!=f){for(var h=m("ngfPattern",a,{$event:c}),j=0;j<f.length;j++)if(("file"===f[j].kind||""===f[j].kind)&&(g.push(),!i.validatePattern(f[j],h))){e=e.reject;break}e=e.accept}}d(e||m("ngfDragOverClass")||"dragover")}function k(a,b,c,d){function e(a,b,c){if(null!=b)if(b.isDirectory){var d=(c||"")+b.name;a.push({name:b.name,type:"directory",path:d});var f=b.createReader(),g=[];i++;var h=function(){f.readEntries(function(d){try{if(d.length)g=g.concat(Array.prototype.slice.call(d||[],0)),h();else{for(var f=0;f<g.length;f++)e(a,g[f],(c?c:"")+b.name+"/");i--}}catch(j){i--,console.error(j)}},function(){i--})};h()}else i++,b.file(function(b){try{i--,b.path=(c?c:"")+b.name,a.push(b)}catch(d){i--,console.error(d)}},function(){i--})}var f=[],i=0,j=a.dataTransfer.items;if(j&&j.length>0&&"file"!==h.protocol())for(var k=0;k<j.length;k++){if(j[k].webkitGetAsEntry&&j[k].webkitGetAsEntry()&&j[k].webkitGetAsEntry().isDirectory){var l=j[k].webkitGetAsEntry();if(l.isDirectory&&!c)continue;null!=l&&e(f,l)}else{var m=j[k].getAsFile();null!=m&&f.push(m)}if(!d&&f.length>0)break}else{var n=a.dataTransfer.files;if(null!=n)for(var o=0;o<n.length&&(f.push(n.item(o)),d||!(f.length>0));o++);}var p=0;!function q(a){g(function(){if(i)10*p++<2e4&&q(10);else{if(!d&&f.length>1){for(k=0;"directory"===f[k].type;)k++;f=[f[k]]}b(f)}},a||0)}()}var l=b(),m=function(a,b,c){return i.attrGetter(a,d,b,c)};if(m("dropAvailable")&&g(function(){a[m("dropAvailable")]?a[m("dropAvailable")].value=l:a[m("dropAvailable")]=l}),!l)return void(m("ngfHideOnDropNotAvailable",a)===!0&&c.css("display","none"));i.registerValidators(e,d,a);var n=!1;d.$observe("ngfDrop",function(a){a===!1?c.attr("disabled","disabled"):a===!0&&c.removeAttr("disabled")});var o,p=null,q=m("ngfStopPropagation",a),r=1;c[0].addEventListener("dragover",function(b){if(!c.attr("disabled")&&!n){if(b.preventDefault(),q(a)&&b.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var e=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy"}g.cancel(p),o||(o="C",j(a,d,b,function(a){o=a,c.addClass(o)}))}},!1),c[0].addEventListener("dragenter",function(b){c.attr("disabled")||n||(b.preventDefault(),q(a)&&b.stopPropagation())},!1),c[0].addEventListener("dragleave",function(){c.attr("disabled")||n||(p=g(function(){c.removeClass(o),o=null},r||1))},!1),c[0].addEventListener("drop",function(b){c.attr("disabled")||n||(b.preventDefault(),q(a)&&b.stopPropagation(),c.removeClass(o),o=null,k(b,function(c){i.updateModel(e,d,a,m("ngfChange")||m("ngfDrop"),c,b)},m("ngfAllowDir",a)!==!1,m("multiple")||m("ngfMultiple",a)))},!1),c[0].addEventListener("paste",function(b){if(!c.attr("disabled")&&!n){var f=[],g=b.clipboardData||b.originalEvent.clipboardData;if(g&&g.items){for(var h=0;h<g.items.length;h++)-1!==g.items[h].type.indexOf("image")&&f.push(g.items[h].getAsFile());i.updateModel(e,d,a,m("ngfChange")||m("ngfDrop"),f,b)}}},!1)}function b(){var a=document.createElement("div");return"draggable"in a&&"ondrop"in a}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload",function(b,c,d,e){return{restrict:"AEC",require:"?ngModel",link:function(f,g,h,i){a(f,g,h,i,b,c,d,e)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(a,c){b()&&c.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(a,c,d){return function(e,f,g){if(b()){var h=a(d.attrGetter("ngfDropAvailable",g));c(function(){h(e),h.assign&&h.assign(e,!0)})}}}])}();